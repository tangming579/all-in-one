在.NET的System.Threading命名空间中有一个名叫WaitHandler的类，这是一个抽象类(abstract),我们无法手动去创建它，但是WaitHandler有三个子类，这三个子类分别是：

```
System.Threading.EventWaitHandle

System.Threading.Mutex

System.Threading.Semaphore
```

EventWaitHandle类的用途是可以调用其WaitOne方法来阻塞线程的运行，直到得到一个信号（该信号由EventWaitHandle类的Set方法发出），然后释放线程让其不再阻塞继续运行。

构造函数

```
//initialState: true终止状态，false非终止状态
//EventResetMode：AutoReset自动，AutoReset手动
EventWaitHandle(bool initialState, EventResetMode mode);
```

EventWaitHandle类拥有两种状态，**终止状态** 和 **非终止状态**：

- 在终止状态下，被WaitOne阻塞的线程会逐个得到释放，所以当EventWaitHandle始终处于终止状态时，调用其WaitOne方法无法起到阻塞线程的作用，因为线程被其WaitOne方法阻塞后，会立即被释放掉。
- 在非终止状态下，被WaitOne阻塞的线程会继续被阻塞，如果一个线程在EventWaitHandle对象处于非终止状态时调用了其WaitOne函数，该线程会立即被阻塞。

需要注意的是终止状态和非终止状态之间，是可以相互转换的。调用EventWaitHandle对象的Set方法既可以将EventWaitHandle对象设置为终止状态，调用EventWaitHandle对象的Reset方法既可以将EventWaitHandle对象设置为非终止状态。

此外，EventWaitHandle类还拥有两种模式，**AutoReset** 和 **ManualReset** 模式：

- 在AutoReset模式下，当EventWaitHandle对象被置为终止状态时，释放一个被WaitOne阻塞的线程后，EventWaitHandle对象会马上被设置为非终止状态，这个过程就等同于一个被WaitOne阻塞的线程被释放后，自动调用了EventWaitHandle的Reset方法，将EventWaitHandle对象自动从终止状态置回了非终止状态，所以这种模式叫AutoReset模式。所以如果有若干线程被EventWaitHandle对象的WaitOne方法阻塞了，每调用一次EventWaitHandle对象的Set方法将EventWaitHandle对象置为终止状态后，只能释放一个被阻塞的线程，然后EventWaitHandle对象又会被置为非终止状态。如果EventWaitHandle对象的Set方法之后又被调用了一次，剩下那些被阻塞的线程中，又会有一个线程被释放。所以如果有8个被WaitOne方法阻塞的线程，那么需要调用次EventWaitHandle对象的Set方法8次，才能让所有线程都得到释放。需要注意的一点就是MSDN中有提到：如果两次EventWaitHandle对象的Set方法调用非常接近，以至于当第一次调用Set方法后，被阻塞的线程还没有来得及释放，第二次Set调用又开始了，那么这两次Set方法的调用只会让一个被阻塞的线程被释放，也就是说如果两次Set方法的调用过于接近，那么就相当于只调用了一次。原因就是因为由于两次Set调用过于接近，当第一次Set调用后，其释放的线程还没有完全被释放，即EventWaitHandle对象还没有被置回非终止状态，第二次Set调用又开始了，又要求EventWaitHandle对象变成终止状态去释放剩余的阻塞线程，但是问题是现在EventWaitHandle对象本来就处于终止状态，并且第一次Set调用后的那个被释放的线程还没有被完全释放，所以现在不能去释放剩余的阻塞线程。之后待第一次Set调用后的那个被释放线程完全释放后，由于EventWaitHandle对象处于AutoReset模式，所以现在EventWaitHandle对象才会被置回非终止状态，那么就相当于第二次Set调用就白白浪费了一次机会去将EventWaitHandle对象置为终止状态去释放剩余的阻塞线程。
- 在ManualReset模式下，当EventWaitHandle对象被置为终止状态时，释放一个被WaitOne阻塞的线程后，其状态不会改变，仍然处于终止状态，所以当ManualReset模式下EventWaitHandle对象处于终止状态时，会连续释放所有被WaitOne方法阻塞的线程，直到手动调用其Reset方法将其置回非终止状态。所以这种模式叫ManualReset模式。